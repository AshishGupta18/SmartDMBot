{
  "object type": "IEXT",
  "description": "IDoc Extension is a customization of an existing IDoc Basic Type. It allows you to add custom segments or fields without modifying the standard IDoc type, enabling specific business needs to be met without losing standard compatibility.",
  "tcode": ["WE30", "WE31", "WE82", "WE20", "SE16"],
  "tool_used": [
    {
      "tool": "WE30",
      "purpose": "Used to create and edit IDoc types including Extensions by copying standard Basic Types and adding custom segments."
    },
    {
      "tool": "WE31",
      "purpose": "Used to create and edit custom segments to be used in IDoc Extensions."
    },
    {
      "tool": "WE82",
      "purpose": "Used to maintain IDoc type and message type assignment for Extensions."
    },
    {
      "tool": "WE20",
      "purpose": "Used to configure partner profiles and processing rules for IDocs."
    },
    {
      "tool": "SE16",
      "purpose": "Used to view/edit tables like EDBAS, EDISDEF, EDIMSG, and segment control tables."
    }
  ],
  "retrofit_process": {
    "overview": "IDoc Extensions are not imported via ToC due to TABU dependency. Manual creation of extension and segments is necessary.",
    "cases": [
      {
        "name": "Case 1 - New Extension",
        "steps": [
          "Go to WE30 and enter extension name.",
          "Select 'Extension' radio button.",
          "Choose existing Basic Type to extend (e.g., WBBDLD04).",
          "Create new segment using WE31 (e.g., ZSEG_BOOKDATA).",
          "Add fields exactly matching source system (name, type, length).",
          "Insert the segment in proper hierarchy position.",
          "Do not release segment if it's not released in source system.",
          "Maintain IDoc Extension mapping in WE82 and check partner config in WE20."
        ]
      },
      {
        "name": "Case 2 - Existing Extension",
        "steps": [
          "Use WE30 to find the extension and click 'Change'.",
          "If editing is restricted, check release status of custom segments.",
          "Use debug method via EDISDEF table to cancel segment release if necessary.",
          "Make structural changes and re-save.",
          "Verify message type assignment in WE82 and consistency in WE20."
        ]
      }
    ],
    "debug_workaround": {
      "description": "Use this to unlock segments if release cancellation fails via UI.",
      "steps": [
        "Open EDISDEF table in SE16 and enter segment name.",
        "Activate debugging mode with /h.",
        "Change CODE from SHOW to EDIT and press F8.",
        "Remove 'X' from release flag field and save.",
        "Segment will now be editable in WE31."
      ]
    }
  },
  "comparison notes": {
    "object_type": "IDoc Extension",
    "tcode": "WE30",
    "table": "EDBAS",
    "things_to_remember": [
      "IDoc Extensions must be manually recreated in the target system.",
      "Custom segments must match exactly with the source.",
      "WE82 mapping is critical to activate the extension in processing.",
      "ToC is not preferred due to table dependency (TABU)."
    ],
    "structured_steps": {
      "create_new_extension": [
        "Go to WE30",
        "Select 'Extension', enter new name",
        "Choose Basic Type to extend (e.g., WBBDLD04)",
        "Add custom segment to structure hierarchy",
        "Save without releasing if not released in source",
        "Assign to message type in WE82",
        "Verify partner profile in WE20"
      ],
      "create_custom_segment": [
        "Go to WE31",
        "Enter segment name and click Create",
        "Add required fields (name, type, length)",
        "Save without releasing if source not released"
      ]
    }
  },
  "common_errors": [
    {
      "error": "Segment not editable",
      "solution": "Use debug workaround in SE16 for EDISDEF to unlock"
    },
    {
      "error": "Message type not triggering extension",
      "solution": "Check WE82 mapping and partner profile config in WE20"
    },
    {
      "error": "Field mismatch in segment",
      "solution": "Verify segment structure matches source (field order, types)"
    }
  ],
  "best_practices": [
    "Use naming conventions like ZEXT_<BASIC_TYPE> for extensions.",
    "Maintain segment structure identical to source system.",
    "Avoid releasing segment if not released in source to prevent sync issues.",
    "Ensure correct hierarchy and message type mapping.",
    "Test extension end-to-end in a sandbox or test system before moving to target."
  ],
  "chatbot_responses": {
    "followup_questions": [
      {
        "question": "How to create a new IDoc Extension in the target system?",
        "answer": "Use WE30 to create an Extension based on a standard Basic Type, then add custom segments and maintain message type mapping in WE82."
      },
      {
        "question": "What is the use of WE82 in IDoc Extensions?",
        "answer": "It is used to assign message types to IDoc Extensions, enabling runtime processing."
      },
      {
        "question": "How do I link an Extension to a Message Type?",
        "answer": "Use WE82 to maintain the assignment between the IDoc Extension and its message type."
      },
      {
        "question": "What to do if my segment is released but needs editing?",
        "answer": "Use debug method on table EDISDEF in SE16 to unlock the segment."
      },
      {
        "question": "Can I use ToC for IDoc Extensions?",
        "answer": "No. Due to TABU dependency, manual creation is required."
      },
      {
        "question": "Why is my custom segment not showing in runtime?",
        "answer": "Check if the extension is correctly mapped in WE82 and partner profiles in WE20."
      },
      {
        "question": "What's the difference between Basic Type and Extension?",
        "answer": "Basic Type is standard; Extension adds custom segments without modifying the original structure."
      },
      {
        "question": "Do I always need to release a custom segment?",
        "answer": "No. Match the release status of the segment with the source system."
      },
      {
        "question": "How to debug if the IDoc Extension is not picked up during processing?",
        "answer": "Check WE82, WE20 settings and confirm if the correct extension and message type are assigned."
      }
    ]
  }
}
